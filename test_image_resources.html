<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡èµ„æºå®Œæ•´æ€§æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h2 {
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        .image-item {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            text-align: center;
        }
        .image-item img {
            max-width: 100%;
            height: auto;
            border: 1px solid #eee;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .image-item .image-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .image-item .image-info {
            font-size: 12px;
            color: #666;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.success {
            background-color: #4CAF50;
            color: white;
        }
        .status.error {
            background-color: #f44336;
            color: white;
        }
        .status.loading {
            background-color: #ff9800;
            color: white;
        }
        .report-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .report-section h3 {
            color: #333;
            margin-bottom: 15px;
        }
        #reportPreview {
            min-height: 400px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <h1>ğŸ” å›¾ç‰‡èµ„æºå®Œæ•´æ€§æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>1. èƒŒæ™¯å›¾ç‰‡æµ‹è¯•</h2>
        <div class="image-grid">
            <div class="image-item">
                <img src="image/bg1.png" alt="èƒŒæ™¯1" onerror="this.parentElement.querySelector('.status').textContent='åŠ è½½å¤±è´¥'; this.parentElement.querySelector('.status').className='status error';" onload="this.parentElement.querySelector('.status').textContent='åŠ è½½æˆåŠŸ'; this.parentElement.querySelector('.status').className='status success';">
                <div class="image-name">bg1.png</div>
                <div class="image-info">èƒŒæ™¯å›¾ç‰‡1</div>
                <div class="status loading">åŠ è½½ä¸­...</div>
            </div>
            <div class="image-item">
                <img src="image/bg2.png" alt="èƒŒæ™¯2" onerror="this.parentElement.querySelector('.status').textContent='åŠ è½½å¤±è´¥'; this.parentElement.querySelector('.status').className='status error';" onload="this.parentElement.querySelector('.status').textContent='åŠ è½½æˆåŠŸ'; this.parentElement.querySelector('.status').className='status success';">
                <div class="image-name">bg2.png</div>
                <div class="image-info">èƒŒæ™¯å›¾ç‰‡2</div>
                <div class="status loading">åŠ è½½ä¸­...</div>
            </div>
            <div class="image-item">
                <img src="image/bg3.png" alt="èƒŒæ™¯3" onerror="this.parentElement.querySelector('.status').textContent='åŠ è½½å¤±è´¥'; this.parentElement.querySelector('.status').className='status error';" onload="this.parentElement.querySelector('.status').textContent='åŠ è½½æˆåŠŸ'; this.parentElement.querySelector('.status').className='status success';">
                <div class="image-name">bg3.png</div>
                <div class="image-info">èƒŒæ™¯å›¾ç‰‡3</div>
                <div class="status loading">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>2. ç­ä¸»ä»»å¤´åƒæµ‹è¯•</h2>
        <div class="image-grid">
            <div class="image-item">
                <img src="image/å¤´åƒ1.png" alt="å¤´åƒ1" onerror="this.parentElement.querySelector('.status').textContent='åŠ è½½å¤±è´¥'; this.parentElement.querySelector('.status').className='status error';" onload="this.parentElement.querySelector('.status').textContent='åŠ è½½æˆåŠŸ'; this.parentElement.querySelector('.status').className='status success';">
                <div class="image-name">å¤´åƒ1.png</div>
                <div class="image-info">ç­ä¸»ä»»å¤´åƒ1</div>
                <div class="status loading">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>3. æŠ¥å‘Šé¢„è§ˆæµ‹è¯•</h2>
        <p>æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨ä¸­çš„èƒŒæ™¯å›¾ç‰‡å’Œå¤´åƒæ˜¾ç¤ºæ•ˆæœï¼š</p>
        <div id="reportPreview"></div>
    </div>
    
    <div class="test-section">
        <h2>4. æµ‹è¯•ç»“æœæ±‡æ€»</h2>
        <div id="testResults"></div>
    </div>
    
    <script>
        // æµ‹è¯•å›¾ç‰‡åŠ è½½
        function testImageLoading() {
            const images = [
                { name: 'bg1.png', path: 'image/bg1.png', type: 'background' },
                { name: 'bg2.png', path: 'image/bg2.png', type: 'background' },
                { name: 'bg3.png', path: 'image/bg3.png', type: 'background' },
                { name: 'å¤´åƒ1.png', path: 'image/å¤´åƒ1.png', type: 'avatar' }
            ];
            
            const results = [];
            let completed = 0;
            const total = images.length;
            
            images.forEach((img, index) => {
                const testImg = new Image();
                testImg.onload = function() {
                    results.push({
                        name: img.name,
                        path: img.path,
                        type: img.type,
                        status: 'success',
                        width: this.width,
                        height: this.height,
                        size: this.naturalWidth * this.naturalHeight
                    });
                    completed++;
                    checkCompletion();
                };
                testImg.onerror = function() {
                    results.push({
                        name: img.name,
                        path: img.path,
                        type: img.type,
                        status: 'error',
                        width: 0,
                        height: 0,
                        size: 0
                    });
                    completed++;
                    checkCompletion();
                };
                testImg.src = img.path;
            });
            
            function checkCompletion() {
                if (completed === total) {
                    displayResults(results);
                }
            }
        }
        
        function displayResults(results) {
            const resultsDiv = document.getElementById('testResults');
            let html = '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr style="background-color: #4CAF50; color: white;"><th>æ–‡ä»¶å</th><th>è·¯å¾„</th><th>ç±»å‹</th><th>çŠ¶æ€</th><th>å°ºå¯¸</th></tr>';
            
            results.forEach(result => {
                const statusColor = result.status === 'success' ? '#4CAF50' : '#f44336';
                const statusText = result.status === 'success' ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±è´¥';
                html += `<tr style="border-bottom: 1px solid #ddd;">`;
                html += `<td style="padding: 8px;">${result.name}</td>`;
                html += `<td style="padding: 8px;">${result.path}</td>`;
                html += `<td style="padding: 8px;">${result.type}</td>`;
                html += `<td style="padding: 8px; color: ${statusColor}; font-weight: bold;">${statusText}</td>`;
                html += `<td style="padding: 8px;">${result.width > 0 ? result.width + 'x' + result.height : 'N/A'}</td>`;
                html += `</tr>`;
            });
            
            html += '</table>';
            resultsDiv.innerHTML = html;
            
            // æµ‹è¯•æŠ¥å‘Šé¢„è§ˆ
            testReportPreview();
        }
        
        function testReportPreview() {
            const reportPreview = document.getElementById('reportPreview');
            reportPreview.style.backgroundImage = "url('image/bg1.png')";
            reportPreview.style.backgroundSize = 'cover';
            reportPreview.style.backgroundPosition = 'center';
            reportPreview.style.backgroundRepeat = 'no-repeat';
            reportPreview.style.minHeight = '400px';
            reportPreview.style.position = 'relative';
            
            // æ·»åŠ æµ‹è¯•å†…å®¹
            const content = document.createElement('div');
            content.style.padding = '20px';
            content.style.color = '#333';
            
            const title = document.createElement('h2');
            title.textContent = 'æµ‹è¯•å­¦å‘˜å­¦ä¹ æƒ…å†µæŠ¥å‘Š';
            title.style.textAlign = 'center';
            title.style.color = '#333';
            content.appendChild(title);
            
            const section = document.createElement('div');
            section.style.marginTop = '20px';
            section.style.padding = '15px';
            section.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
            section.style.borderRadius = '8px';
            
            const avatar = document.createElement('img');
            avatar.src = 'image/å¤´åƒ1.png';
            avatar.style.width = '60px';
            avatar.style.height = '60px';
            avatar.style.borderRadius = '50%';
            avatar.style.float = 'left';
            avatar.style.marginRight = '15px';
            
            const text = document.createElement('div');
            text.innerHTML = '<p>è¿™æ˜¯æµ‹è¯•æ–‡å­—ç‚¹è¯„å†…å®¹ã€‚</p><p>èƒŒæ™¯å›¾ç‰‡å’Œç­ä¸»ä»»å¤´åƒåº”è¯¥éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>';
            text.style.lineHeight = '1.6';
            
            section.appendChild(avatar);
            section.appendChild(text);
            content.appendChild(section);
            reportPreview.appendChild(content);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹æµ‹è¯•
        window.onload = function() {
            console.log('å¼€å§‹å›¾ç‰‡èµ„æºå®Œæ•´æ€§æµ‹è¯•...');
            testImageLoading();
        };
    </script>
</body>
</html>